SET CURRENT SCHEMA VSAFE;

DROP VIEW  LabelAudits_VW;
DROP TABLE LabelAudits;
DROP TABLE LabelEventMap;
DROP TABLE LabelEvents;
DROP TABLE LabelLines;
DROP TABLE LabelTokens;
DROP TABLE Labels;

CREATE TABLE VSAFE.LabelEventMap
  (
    LabelEventMapID INT NOT NULL ,
    LabelEventID    INT NOT NULL ,
    LabelID         INT NOT NULL ,
    LabelCount      NUMERIC (4),
	PRIMARY KEY (LabelEventMapID )
  ) ;


CREATE TABLE VSAFE.LabelEvents
  (
    LabelEventID INT NOT NULL ,
    EventName    VARCHAR (100),
	PRIMARY KEY (LabelEventID  )
  ) ;


CREATE TABLE VSAFE.LabelLines
  (
    LabelLineID INT NOT NULL ,
    LabelID     INT NOT NULL ,
    LineText    VARCHAR (100) NOT NULL ,
    LineNumber  NUMERIC (2),
	PRIMARY KEY (LabelLineID  )
  ) ;


CREATE TABLE VSAFE.LabelTokens
  (
    LabelTokenID INT NOT NULL ,
    TokenName    VARCHAR (50) ,
    Literal      NUMERIC (1) ,
    TokenValue   VARCHAR (50),
	PRIMARY KEY (LabelTokenID  )
  ) ;


CREATE TABLE VSAFE.Labels
  (
    LabelID          INT NOT NULL ,
    LabelDescription VARCHAR (100) ,
    LabelName        VARCHAR (100) ,
    LabelFile 		VARCHAR(255) ,
    MaxLines NUMERIC (2),
	PRIMARY KEY (LabelID  )
  ) ;

 CREATE TABLE VSAFE.LabelAudits
  (
    LabelAuditID    INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	LabelEventID			INT,
	LabelID			INT,
	VoterID			INT,
	Special			BOOLEAN,
	Provisional		BOOLEAN,
	OutOfCounty		BOOLEAN,
    LabelsGenerated NUMERIC (4) ,
    ActivityDate    TIMESTAMP,
    AuditUser       VARCHAR (50),
	ResultStatus	VARCHAR(50),
	ResultDescription	BLOB,
	EventMessage	VARCHAR(200),
	PRIMARY KEY (LabelAuditID)
  ) ;

CREATE VIEW VSAFE.LabelAudits_VW AS 
	SELECT EVENTNAME, LABELNAME, VOTERID, SPECIAL, PROVISIONAL, OUTOFCOUNTY, LABELSGENERATED, ACTIVITYDATE, AUDITUSER, RESULTSTATUS, RESULTDESCRIPTION
		FROM VSAFE.LABELAUDITS A 
			JOIN VSAFE.LABELS B ON A.LABELID = B.LABELID 
			JOIN VSAFE.LABELEVENTS C ON A.LABELEVENTID = C.LABELEVENTID
	;		
  

Insert into LABELEVENTS (LABELEVENTID,EVENTNAME) values (1,'Minnetonka All Labels');
Insert into LABELEVENTS (LABELEVENTID,EVENTNAME) values (2,'Minnetonka Regular Labels');
Insert into LABELEVENTS (LABELEVENTID,EVENTNAME) values (3,'Minnetonka Conflict Labels');
Insert into LABELEVENTS (LABELEVENTID,EVENTNAME) values (4,'Minnetonka Special Labels');


Insert into LABELS (LABELID,LABELDESCRIPTION,LABELNAME,MAXLINES, LABELFILE) values (1,'VRA Label','VRA Label',7,'C:/VOTESAFE/BrotherLabel-ExtraLine.lbl');
Insert into LABELS (LABELID,LABELDESCRIPTION,LABELNAME,MAXLINES, LABELFILE) values (2,'No Conflict','Regular Check In - No Conflict',6,'C:/VOTESAFE/BrotherLabel.lbl');
Insert into LABELS (LABELID,LABELDESCRIPTION,LABELNAME,MAXLINES, LABELFILE) values (3,'Conflict','Regular Check In - Conflict',6,'C:/VOTESAFE/BrotherLabel.lbl');


Insert into LABELEVENTMAP (LABELEVENTMAPID,LABELEVENTID,LABELID,LABELCOUNT) values (1,1,1,1);
Insert into LABELEVENTMAP (LABELEVENTMAPID,LABELEVENTID,LABELID,LABELCOUNT) values (2,1,2,1);
Insert into LABELEVENTMAP (LABELEVENTMAPID,LABELEVENTID,LABELID,LABELCOUNT) values (3,1,3,2);
Insert into LABELEVENTMAP (LABELEVENTMAPID,LABELEVENTID,LABELID,LABELCOUNT) values (4,2,2,1);
Insert into LABELEVENTMAP (LABELEVENTMAPID,LABELEVENTID,LABELID,LABELCOUNT) values (5,3,3,2);
Insert into LABELEVENTMAP (LABELEVENTMAPID,LABELEVENTID,LABELID,LABELCOUNT) values (6,4,1,1);
Insert into LABELEVENTMAP (LABELEVENTMAPID,LABELEVENTID,LABELID,LABELCOUNT) values (7,4,2,2);

Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (1,1,'US Citizen: %%5%% 18ys: Y DOB: %%10%% ',1);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (2,1,'%%12%%',2);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (3,1,'%%7%%',3);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (4,1,'DL: %%11%% SS: %%6%%',4);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (5,1,'%%15%%',5);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (6,1,'%%16%%',6);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (7,1,'PCT: %%8%% SC: %%9%%',7);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (8,2,'%%12%%',1);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (9,2,'%%7%%',2);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (10,2,'%%10%%',3);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (11,2,'VOTER ID: %%13%%',4);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (12,2,'PCT: %%8%% SC: %%9%%',5);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (13,2,'VRA: %%14%%',6);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (14,3,'**** CONFLICT RESOLVED ****',1);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (15,3,'%%12%%',2);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (16,3,'%%7%%',3);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (17,3,'%%10%%',4);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (18,3,'VOTER ID: %%13%%',5);
Insert into LABELLINES (LABELLINEID,LABELID,LINETEXT,LINENUMBER) values (19,3,'PCT: %%8%% SC: %%9%%',6);


Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (1,'lbl_USCitizen','US Citizen:',1);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (2,'lbl_VoterID','VOTER ID:',1);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (3,'lbl_18yrs','18yrs:',1);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (4,'lbl_DOB','DOB: ',1);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (5,'tkn_USCitizen','tkn_usCitizen',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (6,'tkn_SSN','tkn_ssn4',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (7,'Address','tkn_address',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (8,'Precinct Portion Code','tkn_precinctPortionCode',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (9,'School District','tkn_schoolDistrict',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (10,'Birth Date','tkn_birthDate',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (11,'Driver License Number','tkn_dlNum',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (12,'Full Name','tkn_fullName',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (13,'Voter ID','tkn_voterID',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (14,'VRA','tkn_VRA',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (15,'Other Name','tkn_otherName',0);
Insert into LABELTOKENS (LABELTOKENID,TOKENNAME,TOKENVALUE,LITERAL) values (16,'Other Value','tkn_otherValue',0);



